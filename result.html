<!DOCTYPE html>
<html lang="en"><head>
  <base href="/" />
  <script src="./js/jquery.min.js"></script>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no,viewport-fit=cover">
  <title>2012 Jeep Wrangler Unlimited Rubicon Sport Utility 4D SUV for Sale - Carslyst</title>
  <link rel="preload" href="./css/style.css" as="style">
  <link rel="stylesheet" href="./css/style.css">
  <link rel="icon" href="./img/icon.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="./js/utlParam.js"></script>
  <style>
    .success-wrap {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 300px;
    }
    .success-content {
      text-align: center;
    }
    .success-icon {
      font-size: 48px;
      color: #52c41a;
      margin-bottom: 16px;
    }
    .success-text {
      font-size: 24px;
      color: #333;
      margin-bottom: 24px;
    }

    .back-btn {
      display: inline-block;
      padding: 8px 24px;
      background: #1890ff;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
    }
    .back-btn:hover {
      background: #40a9ff;
    }

    .share-title {
      text-align: center;
      font-size: 1.2em;
      margin-bottom: 20px;
    }

    .social-share {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    .social-btn {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      color: white;
      text-decoration: none;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .social-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* Platform-specific colors */
    .facebook   { background-color: #3b5998; }
    .instagram  { background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fd5949 45%, #d6249f 60%, #285AEB 90%); }
    .twitter    { background-color: #1da1f2; }
    .youtube    { background-color: #ff0000; }
    .whatsapp   { background-color: #25d366; }
    .pinterest  { background-color: #bd081c; }
    .snapchat   { background-color: #fffc00; color: black; }
    .messenger  { background-color: #0084ff; }

    .shareUl{
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      grid-gap: 10px;
    }

    @media (max-width: 600px) {
      .social-btn {
        width: 48px;
        height: 48px;
        font-size: 20px;
      }

      .shareUl{
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-gap: 10px;
        column-gap: 30px;
      }
      .underListDiv{
        padding: 0px;
      }
    }

    .suggestHouseUl {
      display: grid;
      grid-gap: 20px;
    }

    @media screen and (min-width: 500px) {
      .suggestHouseUl {
        grid-template-columns: repeat(2, 1fr);
      }
    }


    .RightBottom_adbox {
      width: 100%;
      position: absolute;
      left: 0;
      position: sticky;
      top: 70px;
      height: 300px !important;
    }
  </style>
<body>
<header id="header">
</header>

<main style="height: auto !important;">
  <div class="main" style="height: auto !important;">
    <div class="container detail">
    </div>

    <div class="bottom" style="height: auto !important;">

      <div class="container" style="height: auto !important;">

        <div class="success-wrap">
          <div class="success-content">
            <div class="success-icon">✓</div>
            <div class="success-text" id="lang_succeed">Successfully submitted</div>
            <div class="back-btn" onclick="returnToList()" id="lang_back">Back to homepage</div>
          </div>
        </div>

        <div id="shareDiv">
          <div class="social-share">
            <ul class="shareUl">
              <li>
                <a class="social-btn facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://apkintelligence.com/us/teach/state/Alabama/Autauga%20County/Prattville/2d5b583f-7a53-418b-adf0-ecd9ee417a59/detail" title="Facebook" target="_blank">
                  <i class="fab fa-facebook-f"></i>
                </a>
              </li>
              <li>
                <a class="social-btn instagram" href="https://www.instagram.com" title="Instagram" target="_blank">
                  <i class="fab fa-instagram"></i>
                </a>
              </li>
              <li>
                <a class="social-btn twitter" href="https://twitter.com/intent/tweet?url=https://apkintelligence.com/us/teach/state/Alabama/Autauga%20County/Prattville/2d5b583f-7a53-418b-adf0-ecd9ee417a59/detail" title="Twitter" target="_blank">
                  <i class="fab fa-twitter"></i>
                </a>
              </li>
              <li>
                <a class="social-btn youtube" href="https://www.youtube.com" title="YouTube" target="_blank">
                  <i class="fab fa-youtube"></i>
                </a>
              </li>
              <li>
                <a class="social-btn whatsapp" href="https://api.whatsapp.com/send?text=https://apkintelligence.com/us/teach/state/Alabama/Autauga%20County/Prattville/2d5b583f-7a53-418b-adf0-ecd9ee417a59/detail" title="WhatsApp" target="_blank">
                  <i class="fab fa-whatsapp"></i>
                </a>
              </li>
              <li>
                <a class="social-btn pinterest" href="https://pinterest.com/pin/create/button/?url=https://apkintelligence.com/us/teach/state/Alabama/Autauga%20County/Prattville/2d5b583f-7a53-418b-adf0-ecd9ee417a59/detail" title="Pinterest" target="_blank">
                  <i class="fab fa-pinterest-p"></i>
                </a>
              </li>
              <li>
                <a class="social-btn snapchat" href="https://www.snapchat.com" title="Snapchat" target="_blank">
                  <i class="fab fa-snapchat-ghost"></i>
                </a>
              </li>
              <li>
                <a class="social-btn messenger" href="https://www.messenger.com/t/?link=https://apkintelligence.com/us/teach/state/Alabama/Autauga%20County/Prattville/2d5b583f-7a53-418b-adf0-ecd9ee417a59/detail" title="Messenger" target="_blank">
                  <i class="fab fa-facebook-messenger"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>

        <div class="car-bottom">

          <h2 id="makeInState">Jeep in Alabama</h2>

          <div class="car-list" id = "car-bottom">
            <div class="car-con">
              <div class="car-item">
                <a href="/used-cars/listing-7206/" class="link-cover"></a>
                <div class="car-pic">
                  <div class="car-pic-pop">POPULAR</div>
                  <img src="https://car.carslyst.com/public/static/Images/load-s.webp" alt="2021 Jeep Gladiator 4WD 80th Anniversary for Sale">
                  <div class="car-pic-tip">
                    <svg><use xlink:href="#icon-pic"></use></svg>
                    <span class="car-pic-num">1</span>
                  </div>
                </div>
                <div class="car-content">
                  <div class="car-title"></div>
                  <div class="car-info">
                    <div class="car-info-item">
                      <svg><use xlink:href="#icon-location"></use></svg>
                      <span>Alabaster</span>
                    </div>
                    <div class="car-info-item">
                      <svg><use xlink:href="#icon-date"></use></svg>
                      <span>Jan 03, 2024</span>
                    </div>
                  </div>
                  <div class="car-des"><p>2021 Jeep Gladiator 4WD 80th Anniversary.</p><p>Used 2021 30,093 miles Gray</p></div>
                  <div class="car-prices">$<span class="car-total">38,987</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="aside" style="height: auto !important;">
        <div class="aside-buy" style="height: auto !important;">
          <h2 id="typeInState">SUVs in Alabama</h2>
          <div class="car-list" style="height: auto !important;" id ="car-aside">
            <div class="car-con">
              <div class="car-item">
                <a href="/used-cars/listing-9067/" class="link-cover"></a>
                <div class="car-pic">
                  <img src="https://car.carslyst.com/public/static/Images/load-s.webp" alt="">
                  <div class="car-pic-tip">
                    <svg><use xlink:href="#icon-pic"></use></svg>
                    <span class="car-pic-num">1</span>
                  </div>
                </div>
                <div class="car-content">
                  <div class="car-title">2014 Chevrolet Captiva Sport 4d SUV FWD LT for Sale</div>
                  <div class="car-info">
                    <div class="car-info-item">
                      <svg><use xlink:href="#icon-location"></use></svg>
                      <span>Alabaster</span>
                    </div>
                    <div class="car-info-item">
                      <svg><use xlink:href="#icon-date"></use></svg>
                      <span>Jan 05, 2024</span>
                    </div>
                  </div>
                  <div class="car-des"><p>Features: 4-Cyl Flex Fuel 2.4 Liter, Automatic 6-Spd, ABS (4-Wheel), AM/FM Stereo, Air Bags (Side): Front, Air Bags: Dual Front, Air Bags: F and R Head Curtain, Air Conditioning, Bluetooth Connection, CD: MP3 (Single), Cruise Control, Daytime Running Lights, FWD, On Star, Power Door Locks, Power Steering, Power Windows, Seat: Power Driver, Sirius XM Satellite Radio, Stabili Trak, Tilt and Telescoping Wheel, Traction Control</p><p>Used 2014 Chevrolet Captiva Sport 138,034 miles, Silver</p></div>
                  <div class="car-prices">$<span class="car-total">12,995</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</main>

<footer  id="footer">
</footer>

<script>
  // 加载 header
  fetch('./header.html')
          .then(res => res.text())
          .then(data => {
            document.getElementById('header').innerHTML = data;

            $(".icon-nav").click(function() {
              $(".nav-cover").toggleClass('expand');
              $(".header-nav").toggleClass('expand');
            })
            $(".nav-cover").click(function() {
              $(".nav-cover").toggleClass('expand');
              $(".header-nav").toggleClass('expand');
            })

            $(".nav-item.expand .nav-con").on('click', function(e) {
              if ($(e.target).closest('.icon-go').length) {
                e.preventDefault();
                $(this).parent().find(".nav-sub-list").toggleClass("expand");
              }
            });
          });

  // 加载 footer
  fetch('./footer.html')
          .then(res => res.text())
          .then(data => {
            document.getElementById('footer').innerHTML = data;
          });
</script>

<script type="module">
  import {
    fetchListingById,
    fetchListings
  } from "./js/supabaseApi.js";

  /*
  ========================================
  Detail Page
  ========================================
  */

  function extractIdFromDetailUrl() {
    const match = window.location.pathname.match(/detail-(\d+)/);
    return match ? match[1] : null;
  }

  async function loadDetailPage() {

    // const match =
    //         window.location.pathname
    //                 .match(/listing-(\d+)/);
    // const params = new URLSearchParams(window.location.search);
    // const id = params.get("id");

    const id = extractIdFromDetailUrl()

    console.log(id); // 输出: 123

    const { data } =
            await fetchListingById(id);

    return data
  }

  /*
  ========================================
  Bottom Cars
  ========================================
  */

  function renderCarsBottom(data) {

    const container =
            document.getElementById('car-bottom');

    container.innerHTML = '';

    data.forEach(car => {

      const image =
              car.image_cover === '404.jpg'
                      ? '404.jpg'
                      : car.image_cover;

      const div =
              document.createElement('div');

      div.className = 'car-con';

      div.innerHTML = `
<div class="car-item">

<a href="./detail.html?id=${car.id}"
class="link-cover"></a>

<div class="car-pic">

<div class="car-pic-pop">POPULAR</div>

<img src="https://pub-683228af40b042bb882e1ed4bda118b8.r2.dev/images/${image}" alt="${car.title}">

<div class="car-pic-tip">

<svg>
<use xlink:href="#icon-pic"></use>
</svg>

<span class="car-pic-num">1</span>

</div>

</div>

<div class="car-content">

<div class="car-title"></div>

<div class="car-info">

<div class="car-info-item">

<svg>
<use xlink:href="#icon-location"></use>
</svg>

<span>${car.location}</span>

</div>

<div class="car-info-item">

<svg>
<use xlink:href="#icon-date"></use>
</svg>

<span>${car.listing_date}</span>

</div>

</div>

<div class="car-des">

<p>${car.title}</p>

<p>${car.summary_description}</p>

</div>

${
              car.price !== null &&
              car.price !== undefined &&
              car.price !== ''
                      ? `<div class="car-prices">$<span class="car-total">${car.price}</span></div>`
                      : ''
      }

</div>

</div>
`;

      container.appendChild(div);

    });

  }

  async function loadBottom(data) {

    const result =
            await fetchListings({

              state: data.state,
              category: "",
              make: data.make,
              page: 1,
              limit: 15

            });

    if (result.error) {

      console.error(result.error);

      return;

    }

    renderCarsBottom(result.data);

  }

  /*
  ========================================
  Aside Cars
  ========================================
  */

  function renderCarsAside(data) {

    const container =
            document.getElementById('car-aside');

    container.innerHTML = '';

    data.forEach(car => {

      const image =
              car.image_cover === '404.jpg'
                      ? '404.jpg'
                      : car.image_cover;

      const div =
              document.createElement('div');

      div.className = 'car-con';

      div.innerHTML = `
<div class="car-con">

<div class="car-item">

<a href="./detail.html?id=${car.id}"
class="link-cover"></a>

<div class="car-pic">

<img src="https://pub-683228af40b042bb882e1ed4bda118b8.r2.dev/images/${image}" alt="">

<div class="car-pic-tip">

<svg>
<use xlink:href="#icon-pic"></use>
</svg>

<span class="car-pic-num">1</span>

</div>

</div>

<div class="car-content">

<div class="car-title">
${car.title}
</div>

<div class="car-info">

<div class="car-info-item">

<svg>
<use xlink:href="#icon-location"></use>
</svg>

<span>${car.location}</span>

</div>

<div class="car-info-item">

<svg>
<use xlink:href="#icon-date"></use>
</svg>

<span>${car.listing_date}</span>

</div>

</div>

<div class="car-des">
${car.summary_description}
</div>

${
              car.price !== null &&
              car.price !== undefined &&
              car.price !== ''
                      ? `<div class="car-prices">$<span class="car-total">${car.price}</span></div>`
                      : ''
      }

</div>

</div>

</div>
`;

      container.appendChild(div);

    });

  }

  async function loadAside(data) {

    const result =
            await fetchListings({

              state: data.state,
              category: data.category,
              make: "",
              page: 1,
              limit: 15

            });

    if (result.error) {

      console.error(result.error);

      return;

    }

    renderCarsAside(result.data);

  }

  /*
  ========================================
  Init
  ========================================
  */

  document.addEventListener("DOMContentLoaded", async () => {

    const data = await loadDetailPage();

    console.log(data);

    loadBottom(data)

    loadAside(data)

  });

</script>

<script>
  function returnToList(){

    let list_href = `./states.html`

    window.location.href = list_href;
  }
</script>

</body>
</html>